/*!
 * ============================================================
 *  _   _________   __  _____           _
 * | | | | ___ \ \ / / /  ___|         | |
 * | | | | |_/ /\ V /  \ `--. _   _ ___| |_ ___ _ __ ___  ___
 * | | | |  __/ /   \   `--. \ | | / __| __/ _ \ '_ ` _ \/ __|
 * | |_| | |   / /^\ \ /\__/ / |_| \__ \ ||  __/ | | | | \__ \
 *  \___/\_|   \/   \/ \____/ \__, |___/\__\___|_| |_| |_|___/
 *                             __/ |
 *                            |___/
 * ============================================================
 *
 * UPX Wrapper Library v1.0.0
 * http://www.upxsys.com/
 *
 * Copyright 2014 UPX Systems
 * Released under the LGPL license
 * https://www.gnu.org/licenses/lgpl.html
 *
 * Date: 2014-07-03
 * Author: Mario Penterman
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.UPX=b(a.$)}(this,function(a){var b=function(){};return b.prototype.setServer=function(a){_server=a},b.prototype.setAccount=function(a){_account=a},b.prototype.setUser=function(a){_user=a,_rights="user"},b.prototype.setSubuser=function(a,b){_subaccount=a,_subuser=b,_rights="subuser"},b.prototype.setPassword=function(a){_password=a,_mode="password"},b.prototype.setHash=function(a){_password=a,_mode="hash"},b.prototype.setApikey=function(a){_password=a,_mode="apikey"},b.prototype.call=function(b,c,d,e){if(alert(_server),"undefined"==typeof b)throw new Error("Module is a required parameter.");if("undefined"==typeof c)throw new Error("Method is a required parameter.");if(null==_server)throw new Error("Server should be set.");var f=_server+"/?action=request&api=json&module="+b+"&instance=0&function="+c,d=d||{},g=_prepareAuth(),e=e||{};return a.ajax(a.merge({type:"POST",dataType:"json",url:f,timeout:15e3,processData:!1,data:_serialize({params:d,auth:g})},e)).then(function(b){return a.Deferred(function(a){b.success?a.resolve(b.response):a.reject(b.error)}).promise()},function(b,c,d){return a.Deferred(function(a){"timeout"===d?a.reject("timeout"):501==b.status&&a.reject("501")}).promise()})},b.prototype.prepareCall=function(b,c,d){return c=c||function(){},d=d||function(){},function(){var e=b();return a.when(e).then(c,d),e}},b.prototype.multiCall=function(b,c,d){return c=c||function(){},d=d||function(){},function(){var e=[];a.each(b,function(){e.push(this())}),a.when.apply(a,e).then(c,d)}},b});